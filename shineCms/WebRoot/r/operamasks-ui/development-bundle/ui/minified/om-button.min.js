(function(a){a.widget("om.omButton",{options:{disabled:null,label:null,icons:{left:null,right:null},width:null,onClick:null},_create:function(){var b=this,c=this.options;if(typeof c.disabled!="boolean"){c.disabled=this.element.propAttr("disabled")}this._determineButtonType();if(this.buttonElement.attr("disabled")=="disabled"||c.disabled=="disabled"){c.disabled=true}this._initButton();if(c.disabled){b._addClass("disabled");this.buttonElement.css("cursor","default")}var d=this.buttonElement.parent().parent();d.bind("mouseenter.button",function(e){if(c.disabled){return false}b._addClass("hover")}).bind("mouseleave.button",function(e){if(c.disabled){return false}b._removeClass("hover");b._removeClass("active")}).bind("click.button",function(e){if(c.disabled){e.preventDefault();e.stopImmediatePropagation();return false}else{if(b.options.onClick){b.options.onClick()}}}).bind("mousedown.button",function(e){if(c.disabled){return false}b._addClass("active");b._removeClass("focus");var f=c.onClick;if(f&&f(e)===false){return}}).bind("mouseup.button",function(e){if(c.disabled){return false}b._addClass("focus");b._removeClass("active")}).bind("keydown.button",function(e){if(c.disabled){return false}if(e.keyCode==a.ui.keyCode.SPACE||e.keyCode==a.ui.keyCode.ENTER){b._addClass("active")}if(e.keyCode==a.ui.keyCode.SPACE){var f=c.onClick;if(f&&f(e)===false){return}}}).bind("keyup.button",function(){b._removeClass("active")});this.element.bind("focus",function(e){if(c.disabled){return false}b._addClass("focus")}).bind("blur",function(e){if(c.disabled){return false}b._removeClass("focus")})},enable:function(){this._removeClass("disabled");this.options.disabled=false;this.buttonElement.css("cursor","pointer");return this.element.removeAttr("disabled")},disable:function(){this._addClass("disabled");this.options.disabled=true;this.buttonElement.css("cursor","default");return this.element.attr("disabled","disabled")},click:function(){if(!this.options.disabled&&this.options.onClick){this.options.onClick()}},changeLabel:function(b){if(this.type=="a"){this.buttonElement.text(b)}else{if(this.type=="input"){this.buttonElement.val(b)}else{if(this.type=="button"){this.buttonElement.html(b)}}}},changeIcons:function(b){if(!this.options.disabled){if(b){b.left?this.buttonElement.css("backgroundImage","url( "+b.left+" )"):null;b.right?this.buttonElement.next().attr("src",b.right):null}}},_addClass:function(b){this.buttonElement.parent().parent().addClass("om-state-"+b)},_removeClass:function(b){this.buttonElement.parent().parent().removeClass("om-state-"+b)},_initButton:function(){var d=this.options;var c=this._getLabel();var g=a("<span>").addClass("om-btn om-state-default").css("border","none"),f=a("<span>").addClass("om-btn-bg om-btn-left"),e=a("<span>").addClass("om-btn-bg om-btn-center"),b=a("<span>").addClass("om-btn-bg om-btn-right");if(d.width>10){e.css("width",parseInt(d.width)-10)}var h=this.buttonElement.addClass("om-btn-txt");if(this.type=="a"||this.type=="button"){h.html(c)}else{h.val(c)}if(d.icons.left){if(c){h.addClass("om-btn-icon").css("background-image","url("+d.icons.left+")")}else{h.addClass("om-btn-only-icon").css("background-image","url("+d.icons.left+")")}}h.css({"background-position":"left center","background-repeat":"no-repeat"});h.wrap(g);f.insertBefore(h);b.insertAfter(h);h.wrap(e);if(d.icons.right){if(c!=""){a("<img>").attr("src",d.icons.right).css({"vertical-align":"text-top","padding-left":"3px"}).insertAfter(h)}else{a("<img>").attr("src",d.icons.right).css("vertical-align","text-top").insertAfter(h)}}},_getLabel:function(){return this.options.label||this.buttonElement.html()||this.buttonElement.text()||this.buttonElement.val()},_determineButtonType:function(){if(this.element.is("input")){this.type="input"}else{if(this.element.is("a")){this.type="a"}else{if(this.element.is("button")){this.type="button"}}}this.buttonElement=this.element}})})(jQuery);