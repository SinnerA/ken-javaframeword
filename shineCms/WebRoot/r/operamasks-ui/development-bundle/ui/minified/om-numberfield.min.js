(function(a){var b=function(e,h,f){12.2;var d=e.indexOf(".");if(isNaN(e)&&e!="."){for(;isNaN(e);){e=e.substring(0,e.length-1)}}if(!f.allowNegative&&e.indexOf("-")!=-1){var g=e.split("-");e=g.join("")}if(!f.allowDecimals&&d!=-1||e[e.length-1]==="."){return e.substring(0,d)}if(d!=-1){e=e.substring(0,d+f.decimalPrecision+1)}return e};a.widget("om.omNumberField",{options:{allowDecimals:true,allowNegative:true,decimalPrecision:2,disabled:false,onBlur:function(c){},readOnly:false},_create:function(){var c=this.options;this.element.addClass("om-numberfield om-widget om-state-default om-state-nobg").css("ime-mode","disabled");if(typeof c.disabled!=="boolean"){this.options.disabled=this.element.attr("disabled")}if(c.readOnly){this.element.attr("readonly","readonly")}if(this.element.is(":disabled")){this.options.disabled=true}this.element.keypress(function(g){if(g.which==null&&(g.charCode!=null||g.keyCode!=null)){g.which=g.charCode!=null?g.charCode:g.keyCode}var d=g.which;if(d===8||(d==46&&g.button==-1)||d===0){return}var f=String.fromCharCode(d);a.data(this,"character",f);var h=a.data(this,"allowed");if(h.indexOf(f)===-1||(a(this).val().indexOf("-")!==-1&&f=="-")||(a(this).val().indexOf(".")!==-1&&f==".")){g.preventDefault()}}).focus(function(){a(this).addClass("om-state-focus")}).blur(function(){a(this).removeClass("om-state-focus");var d=a.data(this,"character");this.value=b(this.value,d,c);c.onBlur.apply(this,[this.value])}).keydown(function(d){if(229===d.which){d.preventDefault()}}).keyup(function(g){var f=this.value,d=f.length;if(f&&a.data(this,"allowed").indexOf(f.charAt(d-1))===-1||f.indexOf(".")!=f.lastIndexOf(".")||f.indexOf("-")!=f.lastIndexOf("-")){this.value=f.substring(0,d-1)}}).bind("cut paste",function(d){return false});this._setOption("disabled",c.disabled)},_setOption:function(c,d){this._buildAllowChars();if(c==="disabled"){if(d){this.element.attr(c,true);this.element.addClass("om-numberfield-disabled")}else{this.element.attr(c,false);this.element.removeClass("om-numberfield-disabled")}}},_buildAllowChars:function(){var c="0123456789";if(this.options.allowDecimals){c=c+"."}if(this.options.allowNegative){c=c+"-"}if(this.options.readOnly){c=""}a.data(this.element[0],"allowed",c)}})})(jQuery);